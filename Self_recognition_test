#include "opencv2/opencv.hpp"
#include <fstream>
#include <opencv2/core/core.hpp>
#include <iostream>
#include <string>

using namespace cv;
using namespace std;

int main()
{
    FileStorage fs;
    fs.open("model_xml_10.xml", FileStorage::READ);

    Mat mean;
        fs["mean"] >> mean;

        Mat sub_vec,mean_vec;
           mean.convertTo(mean_vec,0);
           mean_vec=mean_vec.reshape(0,10304);

    Mat eigenvalues;
              fs["eigenvalues"] >> eigenvalues;


    Mat eigenvectors;
              fs["eigenvectors"] >> eigenvectors;
   

    Mat projections[50];

int i=0;
    FileNode n = fs["projections"];
        for (FileNodeIterator current = n.begin(); current != n.end(); current++)
        {
            FileNode item = *current;
            item >> projections[i];
            i++;
        }

    Mat testSample = imread("1.pgm",0);

   testSample=testSample.reshape(0,10304);

    sub_vec=testSample-mean_vec;

    

    // fs.release();
        return (0);
}
